import{S as W,i as Q,s as X,e as m,k as z,t as A,c as h,n as T,a as p,g as D,d as o,b as v,f as B,H as a,h as P,J as $,I as x,K as ee,L as C,j as te,M as se,m as ae,N as ne,o as le,x as re,u as ie,v as oe}from"../chunks/vendor-0b46f6c1.js";function Y(b){let s,r,c,n,i,u=b[0].name+"",E,e,l,t,k=b[0].start+"",f,I,y,g,M=b[0].link+"",w,V;return{c(){s=m("br"),r=z(),c=m("div"),n=m("p"),i=m("b"),E=A(u),e=z(),l=m("br"),t=z(),f=A(k),I=m("br"),y=z(),g=m("a"),w=A(M),this.h()},l(d){s=h(d,"BR",{}),r=T(d),c=h(d,"DIV",{class:!0});var _=p(c);n=h(_,"P",{class:!0});var j=p(n);i=h(j,"B",{});var O=p(i);E=D(O,u),O.forEach(o),e=T(j),l=h(j,"BR",{}),t=T(j),f=D(j,k),I=h(j,"BR",{}),y=T(j),g=h(j,"A",{href:!0});var R=p(g);w=D(R,M),R.forEach(o),j.forEach(o),_.forEach(o),this.h()},h(){v(g,"href",V=b[0].link),v(n,"class","is-size-8"),v(c,"class","box is-shadowless has-text-centered m-0")},m(d,_){B(d,s,_),B(d,r,_),B(d,c,_),a(c,n),a(n,i),a(i,E),a(n,e),a(n,l),a(n,t),a(n,f),a(n,I),a(n,y),a(n,g),a(g,w)},p(d,_){_&1&&u!==(u=d[0].name+"")&&P(E,u),_&1&&k!==(k=d[0].start+"")&&P(f,k),_&1&&M!==(M=d[0].link+"")&&P(w,M),_&1&&V!==(V=d[0].link)&&v(g,"href",V)},d(d){d&&o(s),d&&o(r),d&&o(c)}}}function ce(b){let s,r,c,n,i=Object.keys(b[0]).length>0,u,E,e=i&&Y(b);return{c(){s=m("main"),r=m("button"),c=A(b[1]),n=z(),e&&e.c(),this.h()},l(l){s=h(l,"MAIN",{});var t=p(s);r=h(t,"BUTTON",{class:!0});var k=p(r);c=D(k,b[1]),k.forEach(o),n=T(t),e&&e.l(t),t.forEach(o),this.h()},h(){v(r,"class","button is-fullwidth svelte-auwjev"),r.disabled=b[2]},m(l,t){B(l,s,t),a(s,r),a(r,c),a(s,n),e&&e.m(s,null),u||(E=$(r,"click",b[3]),u=!0)},p(l,[t]){t&2&&P(c,l[1]),t&4&&(r.disabled=l[2]),t&1&&(i=Object.keys(l[0]).length>0),i?e?e.p(l,t):(e=Y(l),e.c(),e.m(s,null)):e&&(e.d(1),e=null)},i:x,o:x,d(l){l&&o(s),e&&e.d(),u=!1,E()}}}function ue(b,s,r){let{randomMeeting:c=[]}=s,{buttonTxt:n="Get A Random Meeting"}=s,{currentlyRefreshing:i=!1}=s;function u(e,l,t){let k=parseInt(e)===1?7:parseInt(e)-1,f;return t||(t="UTC"),f=C.tz(t).set({hour:l.split(":")[0],minute:l.split(":")[1],second:0}).isoWeekday(k),f=f.clone().tz(C.tz.guess()),C.tz(C.tz.guess())>f&&f.add(1,"weeks"),f}function E(){r(1,n="Finding Meeting..."),r(2,i=!0),ee("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments").then(e=>e.json()).then(e=>{let l=[];if(e)for(let t in e){let k=e[t].weekday_tinyint,f=e[t].start_time,I=e[t].time_zone,y=u(k,f,I),g=C.tz(C.tz.guess());y.diff(g,"minutes")>=0&&y.diff(g,"minutes")<=30&&l.push({name:e[t].meeting_name,start:y._d.toString(),link:e[t].comments,time:f,time_zone:I})}console.log(l),r(0,c=l[Math.floor(Math.random()*l.length)]),r(1,n="Get A Random Meeting"),r(2,i=!1)}).catch(e=>console.log("parsing failed",e))}return b.$$set=e=>{"randomMeeting"in e&&r(0,c=e.randomMeeting),"buttonTxt"in e&&r(1,n=e.buttonTxt),"currentlyRefreshing"in e&&r(2,i=e.currentlyRefreshing)},[c,n,i,E]}class fe extends W{constructor(s){super();Q(this,s,ue,ce,X,{randomMeeting:0,buttonTxt:1,currentlyRefreshing:2})}}function de(b){let s,r,c,n,i,u,E,e,l,t,k,f,I,y,g,M,w,V,d,_,j,O;return t=new fe({}),{c(){s=m("script"),c=z(),n=m("section"),i=m("div"),u=m("div"),E=m("h4"),e=A("Random Virtual Meeting"),l=z(),te(t.$$.fragment),k=z(),f=m("div"),I=z(),y=m("footer"),g=m("div"),M=m("p"),w=m("a"),V=A("Ideas?"),d=A(`
          Meetings are sourced from
          `),_=m("a"),j=A("https://virtual-na.org/meetings"),this.h()},l(R){const N=se('[data-svelte="svelte-gzcn9j"]',document.head);s=h(N,"SCRIPT",{src:!0,"data-auto-a11y":!0});var Z=p(s);Z.forEach(o),N.forEach(o),c=T(R),n=h(R,"SECTION",{class:!0});var F=p(n);i=h(F,"DIV",{class:!0});var S=p(i);u=h(S,"DIV",{class:!0});var q=p(u);E=h(q,"H4",{class:!0});var H=p(E);e=D(H,"Random Virtual Meeting"),H.forEach(o),l=T(q),ae(t.$$.fragment,q),q.forEach(o),k=T(S),f=h(S,"DIV",{class:!0}),p(f).forEach(o),I=T(S),y=h(S,"FOOTER",{class:!0});var J=p(y);g=h(J,"DIV",{class:!0});var U=p(g);M=h(U,"P",{});var G=p(M);w=h(G,"A",{href:!0,target:!0});var K=p(w);V=D(K,"Ideas?"),K.forEach(o),d=D(G,`
          Meetings are sourced from
          `),_=h(G,"A",{href:!0,target:!0});var L=p(_);j=D(L,"https://virtual-na.org/meetings"),L.forEach(o),G.forEach(o),U.forEach(o),J.forEach(o),S.forEach(o),F.forEach(o),this.h()},h(){document.title="Random Virtual Meeting",ne(s.src,r="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||v(s,"src",r),v(s,"data-auto-a11y","true"),v(E,"class","title is-4 has-text-centered"),v(u,"class","card p-5"),v(f,"class","empty svelte-mt0rji"),v(w,"href","https://github.com/bmlt-enabled/randomvm/issues"),v(w,"target","_blank"),v(_,"href","https://virtual-na.org/meetings"),v(_,"target","_blank"),v(g,"class","content has-text-centered"),v(y,"class","footer"),v(i,"class","container"),v(n,"class","section p-5")},m(R,N){a(document.head,s),B(R,c,N),B(R,n,N),a(n,i),a(i,u),a(u,E),a(E,e),a(u,l),le(t,u,null),a(i,k),a(i,f),a(i,I),a(i,y),a(y,g),a(g,M),a(M,w),a(w,V),a(M,d),a(M,_),a(_,j),O=!0},p:x,i(R){O||(re(t.$$.fragment,R),O=!0)},o(R){ie(t.$$.fragment,R),O=!1},d(R){o(s),R&&o(c),R&&o(n),oe(t)}}}class he extends W{constructor(s){super();Q(this,s,null,de,X,{})}}export{he as default};
