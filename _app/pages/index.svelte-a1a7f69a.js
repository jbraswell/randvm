import{S as W,i as Q,s as X,e as h,k as T,t as V,c as _,n as z,a as p,g as A,d as o,b as g,f as S,H as s,h as F,J as $,I as H,K as ee,L as B,j as te,M as ae,m as se,N as ne,o as le,x as re,u as ie,v as oe}from"../chunks/vendor-0b46f6c1.js";function Y(b){let a,r,n,c,i=b[0].name+"",d,k,e,l,t=b[0].start+"",E,m,I,v,R=b[0].link+"",y,M;return{c(){a=h("br"),r=T(),n=h("div"),c=h("b"),d=V(i),k=T(),e=h("br"),l=T(),E=V(t),m=h("br"),I=T(),v=h("a"),y=V(R),this.h()},l(f){a=_(f,"BR",{}),r=z(f),n=_(f,"DIV",{class:!0});var u=p(n);c=_(u,"B",{});var w=p(c);d=A(w,i),w.forEach(o),k=z(u),e=_(u,"BR",{}),l=z(u),E=A(u,t),m=_(u,"BR",{}),I=z(u),v=_(u,"A",{href:!0});var D=p(v);y=A(D,R),D.forEach(o),u.forEach(o),this.h()},h(){g(v,"href",M=b[0].link),g(n,"class","block has-text-centered")},m(f,u){S(f,a,u),S(f,r,u),S(f,n,u),s(n,c),s(c,d),s(n,k),s(n,e),s(n,l),s(n,E),s(n,m),s(n,I),s(n,v),s(v,y)},p(f,u){u&1&&i!==(i=f[0].name+"")&&F(d,i),u&1&&t!==(t=f[0].start+"")&&F(E,t),u&1&&R!==(R=f[0].link+"")&&F(y,R),u&1&&M!==(M=f[0].link)&&g(v,"href",M)},d(f){f&&o(a),f&&o(r),f&&o(n)}}}function ce(b){let a,r,n,c,i=Object.keys(b[0]).length>0,d,k,e=i&&Y(b);return{c(){a=h("main"),r=h("button"),n=V(b[1]),c=T(),e&&e.c(),this.h()},l(l){a=_(l,"MAIN",{});var t=p(a);r=_(t,"BUTTON",{class:!0});var E=p(r);n=A(E,b[1]),E.forEach(o),c=z(t),e&&e.l(t),t.forEach(o),this.h()},h(){g(r,"class","button is-fullwidth svelte-auwjev"),r.disabled=b[2]},m(l,t){S(l,a,t),s(a,r),s(r,n),s(a,c),e&&e.m(a,null),d||(k=$(r,"click",b[3]),d=!0)},p(l,[t]){t&2&&F(n,l[1]),t&4&&(r.disabled=l[2]),t&1&&(i=Object.keys(l[0]).length>0),i?e?e.p(l,t):(e=Y(l),e.c(),e.m(a,null)):e&&(e.d(1),e=null)},i:H,o:H,d(l){l&&o(a),e&&e.d(),d=!1,k()}}}function ue(b,a,r){let{randomMeeting:n=[]}=a,{buttonTxt:c="Get A Random Meeting"}=a,{currentlyRefreshing:i=!1}=a;function d(e,l,t){let E=parseInt(e)===1?7:parseInt(e)-1,m;return t||(t="UTC"),m=B.tz(t).set({hour:l.split(":")[0],minute:l.split(":")[1],second:0}).isoWeekday(E),m=m.clone().tz(B.tz.guess()),B.tz(B.tz.guess())>m&&m.add(1,"weeks"),m}function k(){r(1,c="Finding Meeting..."),r(2,i=!0),ee("https://bmlt.virtual-na.org/main_server/client_interface/jsonp/?switcher=GetSearchResults&data_field_key=weekday_tinyint,start_time,time_zone,meeting_name,comments").then(e=>e.json()).then(e=>{let l=[];if(e)for(let t in e){let E=e[t].weekday_tinyint,m=e[t].start_time,I=e[t].time_zone,v=d(E,m,I),R=B.tz(B.tz.guess());v.diff(R,"minutes")>=0&&v.diff(R,"minutes")<=30&&l.push({name:e[t].meeting_name,start:v._d.toString(),link:e[t].comments,time:m,time_zone:I})}console.log(l),r(0,n=l[Math.floor(Math.random()*l.length)]),r(1,c="Get A Random Meeting"),r(2,i=!1)}).catch(e=>console.log("parsing failed",e))}return b.$$set=e=>{"randomMeeting"in e&&r(0,n=e.randomMeeting),"buttonTxt"in e&&r(1,c=e.buttonTxt),"currentlyRefreshing"in e&&r(2,i=e.currentlyRefreshing)},[n,c,i,k]}class fe extends W{constructor(a){super();Q(this,a,ue,ce,X,{randomMeeting:0,buttonTxt:1,currentlyRefreshing:2})}}function de(b){let a,r,n,c,i,d,k,e,l,t,E,m,I,v,R,y,M,f,u,w,D,N;return t=new fe({}),{c(){a=h("script"),n=T(),c=h("section"),i=h("div"),d=h("div"),k=h("h4"),e=V("Random Virtual Meeting"),l=T(),te(t.$$.fragment),E=T(),m=h("div"),I=T(),v=h("footer"),R=h("div"),y=h("p"),M=h("a"),f=V("Ideas?"),u=V(`
          Meetings are sourced from
          `),w=h("a"),D=V("https://virtual-na.org/meetings"),this.h()},l(j){const C=ae('[data-svelte="svelte-gzcn9j"]',document.head);a=_(C,"SCRIPT",{src:!0,"data-auto-a11y":!0});var Z=p(a);Z.forEach(o),C.forEach(o),n=z(j),c=_(j,"SECTION",{class:!0});var J=p(c);i=_(J,"DIV",{class:!0});var O=p(i);d=_(O,"DIV",{class:!0});var q=p(d);k=_(q,"H4",{class:!0});var P=p(k);e=A(P,"Random Virtual Meeting"),P.forEach(o),l=z(q),se(t.$$.fragment,q),q.forEach(o),E=z(O),m=_(O,"DIV",{class:!0}),p(m).forEach(o),I=z(O),v=_(O,"FOOTER",{class:!0});var U=p(v);R=_(U,"DIV",{class:!0});var x=p(R);y=_(x,"P",{});var G=p(y);M=_(G,"A",{href:!0,target:!0});var K=p(M);f=A(K,"Ideas?"),K.forEach(o),u=A(G,`
          Meetings are sourced from
          `),w=_(G,"A",{href:!0,target:!0});var L=p(w);D=A(L,"https://virtual-na.org/meetings"),L.forEach(o),G.forEach(o),x.forEach(o),U.forEach(o),O.forEach(o),J.forEach(o),this.h()},h(){document.title="Random Virtual Meeting",ne(a.src,r="https://use.fontawesome.com/releases/v5.15.4/js/all.js")||g(a,"src",r),g(a,"data-auto-a11y","true"),g(k,"class","title is-4 has-text-centered"),g(d,"class","card p-5"),g(m,"class","empty svelte-mt0rji"),g(M,"href","https://github.com/bmlt-enabled/randomvm/issues"),g(M,"target","_blank"),g(w,"href","https://virtual-na.org/meetings"),g(w,"target","_blank"),g(R,"class","content has-text-centered"),g(v,"class","footer"),g(i,"class","container"),g(c,"class","section p-5")},m(j,C){s(document.head,a),S(j,n,C),S(j,c,C),s(c,i),s(i,d),s(d,k),s(k,e),s(d,l),le(t,d,null),s(i,E),s(i,m),s(i,I),s(i,v),s(v,R),s(R,y),s(y,M),s(M,f),s(y,u),s(y,w),s(w,D),N=!0},p:H,i(j){N||(re(t.$$.fragment,j),N=!0)},o(j){ie(t.$$.fragment,j),N=!1},d(j){o(a),j&&o(n),j&&o(c),oe(t)}}}class he extends W{constructor(a){super();Q(this,a,null,de,X,{})}}export{he as default};
